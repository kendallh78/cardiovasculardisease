<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interactive Charts and Button</title>
  <script src="https://d3js.org/d3.v7.min.js"></script> 
  <style>
    body {
      font-family: Arial, sans-serif;
    }
    .dipped {
      background-color: #ff6347;
      color: white;
      transform: translateX(100px);
    }
    button {
      margin: 20px;
      padding: 10px 20px;
      font-size: 16px;
    }
    .chart {
      display: inline-block;
      margin: 20px;
    }
    svg {
      border: 1px solid #ccc;
    }
  </style>
</head>
<body>
  <h1>Interactive Charts and Moving Button</h1>

  <!-- Button -->
  <button>Click me!</button>

  <!-- Scatter Plot -->
  <div class="chart">
    <h2>Scatter Plot</h2>
    <svg id="scatterPlot"></svg>
  </div>

  <!-- Bar Chart -->
  <div class="chart">
    <h2>Bar Chart</h2>
    <svg id="barChart"></svg>
  </div>

  <script>
    // Log message in the console
    console.log("Hello ðŸŒŽ");

    // Button interaction - toggle class on click
    const btn = document.querySelector("button");
    if (btn) {
      btn.onclick = function () {
        btn.classList.toggle("dipped");
      };
    }

    // Helper code to open specific files (for Glitch environment)
    let goto = (file, line) => {
      window.parent.postMessage(
        { type: "glitch/go-to-line", payload: { filePath: file, line: line } }, "*"
      );
    };
    const filer = document.querySelectorAll(".fileopener");
    filer.forEach((f) => {
      f.onclick = () => { goto(f.dataset.file, f.dataset.line); };
    });

    // D3.js Scatter Plot setup
    const scatterSvg = d3.select("#scatterPlot")
      .attr("width", 400)
      .attr("height", 300);

    const scatterData = [
      { age_in_years: 25, height: 180 },
      { age_in_years: 30, height: 170 },
      { age_in_years: 35, height: 160 }
    ];

    const xScale = d3.scaleLinear().domain([20, 40]).range([30, 370]);
    const yScale = d3.scaleLinear().domain([150, 190]).range([270, 30]);

    scatterSvg.selectAll("circle")
      .data(scatterData)
      .enter()
      .append("circle")
      .attr("cx", d => xScale(d.age_in_years))
      .attr("cy", d => yScale(d.height))
      .attr("r", 8)
      .style("fill", "teal");

    scatterSvg.append("g")
      .attr("transform", "translate(0,270)")
      .call(d3.axisBottom(xScale));
    
    scatterSvg.append("g")
      .attr("transform", "translate(30,0)")
      .call(d3.axisLeft(yScale));

    // D3.js Bar Chart setup
    const barSvg = d3.select("#barChart")
      .attr("width", 400)
      .attr("height", 300);

    const barData = [4, 8, 15, 16, 23, 42];

    const barScale = d3.scaleLinear().domain([0, d3.max(barData)]).range([0, 250]);

    barSvg.selectAll("rect")
      .data(barData)
      .enter()
      .append("rect")
      .attr("x", (d, i) => i * 60)
      .attr("y", d => 300 - barScale(d))
      .attr("width", 50)
      .attr("height", d => barScale(d))
      .style("fill", (d, i) => `rgba(255, 0, 0, ${0.2 + i * 0.1})`);

    barSvg.append("g")
      .attr("transform", "translate(0,250)")
      .call(d3.axisBottom(d3.scaleBand()
        .domain(barData.map((_, i) => i))
        .range([0, 360]))
        .tickFormat((d, i) => `Bar ${i + 1}`));
  </script>
</body>
</html>
